# Developer's notes

## Database Connection Configuration

The application configurations are stored in `src/main/resources/config/*.yml`. There are 3 configuration files:

* `application.yml`
* `application-prod.yml`
* `application-dev.yml`

The `prod` and `dev` configurations will overwrite the `application.yml`. What you need to configure is the database connection. There are 2 databases used in this application: `xpacsweb` and `pacs`. The `xpacsweb` schema is what being maintained by this application, while the `pacs` schema is an external dcm4chee database for images.

For `xpacsweb`, you only need to configure `application-prod.yml` if you want to deploy the production version. See:
```yml
datasource:
    url: jdbc:mysql://localhost:3306/xpacsweb?useUnicode=true&characterEncoding=utf8&useSSL=false
    username: <USERNAME>
    password: <PASSWORD>
```

For `pacs`, you need to configure in the `application.yml`, because both `dev` and `prod` modes need to access this database. Note that the access should be read-only because this application **must not** modify the `pacs` database.
```yml
application:
    pacsdb: # DCM4CHEE server configuration
        init-start: false
        url: http://localhost:8585
        AET: DCM4CHEE
        jdbc-url: jdbc:mysql://localhost:3306/pacs?useUnicode=true&characterEncoding=utf8&useSSL=false
        jdbc-username: <USERNAME>
        jdbc-password: <PASSWORD>
        jdbc-driver: com.mysql.jdbc.Driver
```

For the production mode and also for the `pacs` database, you need to set the MySQL database manually.

## Adding new services

There are menus generated by **jhipster**. These are: `Entities`, `Account` and `Administration`. Please **do not** modify these menus to add new services. Create a new menu to add new services, e.g. the `View` menu.

## Developer resources

Use `/src/main/java/org/cardiacatlas/xpacs/web/rest/DevResource.java` to create hidden API's for development testing. You can access these REST API's through admin's API menu.

Existing dev's resources:
* `/api/pacs-jdbc-connection` to test connection to `pacs` database.
* `/api/populate-tables` to initiate tables with some dummy data. See `DevResource.java` class.

## Adding custom configuration

Please use `application` heading under `application.yml`, `application-dev.yml` or `application-prod.yml` configuration if you want to create custom configurations. When you add a new parameter, you need to modify `ApplicationProperties.java` class. See my notes there.
